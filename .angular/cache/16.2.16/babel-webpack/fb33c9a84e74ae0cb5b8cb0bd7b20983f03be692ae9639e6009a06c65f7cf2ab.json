{"ast":null,"code":"import { ConfirmComponent } from '../confirm/confirm.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../stateless/stateless.component\";\nimport * as i4 from \"../confirm/confirm.component\";\nimport * as i5 from \"../status-cart/status-cart.component\";\nfunction StatefulComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"div\", 11)(2, \"app-stateless\", 12);\n    i0.ɵɵlistener(\"cursomatriculado\", function StatefulComponent_div_7_Template_app_stateless_cursomatriculado_2_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.cursoMatriculado($event));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const curso_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"curso\", curso_r5);\n  }\n}\nfunction StatefulComponent_h3_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\");\n    i0.ɵɵtext(1, \" No has comprado ning\\u00FAn curso a\\u00FAn. \\u00A1Elige uno para empezar!\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction StatefulComponent_h3_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\");\n    i0.ɵɵtext(1, \" Cursos comprados:\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction StatefulComponent_li_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"span\", 14);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const boughtItem_r8 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", boughtItem_r8.title, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(4, 2, boughtItem_r8.price, \"\\u20AC\"));\n  }\n}\nfunction StatefulComponent_li_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 15);\n    i0.ɵɵtext(1, \"Total cursos comprados: \");\n    i0.ɵɵelementStart(2, \"span\", 14);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(4, 1, ctx_r4.finalPrice(), \"\\u20AC\"));\n  }\n}\nexport let StatefulComponent = /*#__PURE__*/(() => {\n  class StatefulComponent {\n    constructor(http) {\n      this.http = http;\n      this.boughtItems = []; // Inicializa el arreglo de productos comprados como un arreglo vacío.\n      this.shopModel = {\n        shopItems: []\n      };\n    }\n    ngOnInit() {\n      this.shopSubscription = this.http.get('assets/cursos.json').subscribe({\n        next: respuesta => {\n          this.shopModel.shopItems = respuesta;\n        },\n        error: respuesta => {\n          this.errorHttp = true;\n        }\n      });\n      console.log(\"json importado\");\n    } // Método del ciclo de vida de Angular que se llama después de que se inicializa el componente. Actualmente está vacío.\n    ngOnDestroy() {\n      this.shopSubscription.unsubscribe();\n    }\n    clickItem(_curso) {\n      this.boughtItems.push(_curso); // Agrega el producto recibido al arreglo de productos comprados.\n      const total = this.finalPrice(); // Llama a finalPrice para obtener el precio total.\n      console.log('Precio total: ', total); // Opcional: muestra el precio total en la consola para depuración.\n    }\n\n    cursoMatriculado(_event) {\n      this.clickItem(_event); // Llama a clickItem con el producto recibido para agregarlo a la lista de comprados.\n      this.confirmChild.isDisabled = false;\n      this.onConfirm();\n    }\n    finalPrice() {\n      // Calcula el precio total sumando los precios de todos los productos comprados.\n      return this.boughtItems.reduce((total, item) => total + item.price, 0);\n    }\n    onConfirm() {\n      alert('Has añadido un nuevo curso');\n    }\n    static {\n      this.ɵfac = function StatefulComponent_Factory(t) {\n        return new (t || StatefulComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: StatefulComponent,\n        selectors: [[\"app-stateful\"]],\n        viewQuery: function StatefulComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(ConfirmComponent, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.confirmChild = _t.first);\n          }\n        },\n        decls: 15,\n        vars: 7,\n        consts: [[\"role\", \"main\", 1, \"container\"], [1, \"starter-template\"], [1, \"lead\"], [1, \"row\", \"justify-content-center\"], [\"class\", \"col-md-4 mb-3\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"list-group\", \"mt-3\"], [\"class\", \"list-group-item\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"list-group-item fw-bold\", 4, \"ngIf\"], [3, \"price\", \"shopModel\", \"add\"], [1, \"col-md-4\", \"mb-3\"], [1, \"card\", \"h-100\"], [3, \"curso\", \"cursomatriculado\"], [1, \"list-group-item\"], [1, \"badge\", \"text-bg-primary\"], [1, \"list-group-item\", \"fw-bold\"]],\n        template: function StatefulComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"main\", 0)(1, \"div\", 1)(2, \"h1\");\n            i0.ɵɵtext(3, \"Stateful\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"p\", 2);\n            i0.ɵɵtext(5, \"Ejemplo de componente stateful.\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"div\", 3);\n            i0.ɵɵtemplate(7, StatefulComponent_div_7_Template, 3, 1, \"div\", 4);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(8, StatefulComponent_h3_8_Template, 2, 0, \"h3\", 5);\n            i0.ɵɵtemplate(9, StatefulComponent_h3_9_Template, 2, 0, \"h3\", 5);\n            i0.ɵɵelementStart(10, \"ul\", 6);\n            i0.ɵɵtemplate(11, StatefulComponent_li_11_Template, 5, 5, \"li\", 7);\n            i0.ɵɵtemplate(12, StatefulComponent_li_12_Template, 5, 4, \"li\", 8);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(13, \"app-confirm\");\n            i0.ɵɵelementStart(14, \"app-status-cart\", 9);\n            i0.ɵɵlistener(\"add\", function StatefulComponent_Template_app_status_cart_add_14_listener() {\n              return ctx.onConfirm();\n            });\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"ngForOf\", ctx.shopModel.shopItems);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.boughtItems.length === 0);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.boughtItems.length > 0);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", ctx.boughtItems);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.finalPrice() > 0);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"price\", ctx.finalPrice())(\"shopModel\", ctx.shopModel.shopItems);\n          }\n        },\n        dependencies: [i2.NgForOf, i2.NgIf, i3.StatelessComponent, i4.ConfirmComponent, i5.StatusCartComponent, i2.CurrencyPipe]\n      });\n    }\n  }\n  return StatefulComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}